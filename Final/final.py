import pandas as pd
from statsmodels.formula.api import ols
from statsmodels.stats.anova import anova_lm
import matplotlib.pyplot as plt
from scipy.stats import ttest_ind
from statsmodels.stats.multicomp import MultiComparison
import seaborn as sns
sns.set_style('ticks')

###############################################################################
# PROBLEM 1 $##################################################################
###############################################################################

###############################################################################
# PROBLEM 2 $##################################################################
###############################################################################

###############################################################################
# PROBLEM 3 $##################################################################
###############################################################################

df = pd.read_csv('socialacceptance.csv')
print(anova_lm(ols("psa ~ C(female)*C(sports)", df).fit(), typ=2))
print(anova_lm(ols("psa ~ C(female)", df.query('sports == 0')).fit(), typ=2))
print(anova_lm(ols("psa ~ C(female)", df.query('sports == 1')).fit(), typ=2))
print(df.query('sports == 1').groupby('female').agg(['mean', 'std']).psa)
sns.factorplot(x="female", y="psa", hue="sports", data=df, order=[0, 1])
plt.savefig('p3.pdf')
plt.close('all')

###############################################################################
# PROBLEM 4 $##################################################################
###############################################################################

###############################################################################
# PROBLEM 5 $##################################################################
###############################################################################

###############################################################################
# PROBLEM 6 $##################################################################
###############################################################################

###############################################################################
# PROBLEM 7 $##################################################################
###############################################################################
